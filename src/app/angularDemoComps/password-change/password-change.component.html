<form [formGroup]="form" #f="ngForm" (ngSubmit)="submit(f)">

    <div class="form-group">
        <label for="oldPassword">Old Password</label>
        <input type="text" 
        id="oldPassword" 
        formControlName="oldPassword" 
        class="form-control">
        <div *ngIf="oldPassword.pending" class="oi oi-clock"> Checking</div>

        <div *ngIf="oldPassword?.touched && oldPassword?.invalid" 
        class="alert alert-danger">

            <div *ngIf="oldPassword.errors?.['required']" 
            class="alert alert-danger">
            Old Password required</div>

            <div *ngIf="oldPassword.errors?.['shouldBeUnique']" 
            class="alert alert-danger">
            Password is already taken</div>

       </div>     
    </div>

    <div class="form-group">
        <label for="newPassword">New Password</label>
        <input type="text" 
        id="newPassword" 
        formControlName="newPassword" 
        class="form-control">

        <div *ngIf="newPassword?.touched && newPassword?.invalid" 
        class="alert alert-danger">

            <div *ngIf="newPassword.errors?.['required']" 
            class="alert alert-danger">
            New Password required</div>
       </div>  

    </div>

    <div class="form-group">
        <label for="repeatPassword">Repeat New Password</label>
        <input type="text" 
        id="repeatPassword"
        formControlName="repeatPassword" 
        class="form-control">

        <div *ngIf="repeatPassword?.touched && repeatPassword?.invalid" 
        class="alert alert-danger">

            <div *ngIf="repeatPassword.errors?.['required']" 
            class="alert alert-danger">
            Username required</div>
       </div> 

       <div *ngIf="repeatPassword.valid && form.invalid && form.errors?.['passwordsShouldMatch']" 
       class="alert alert-danger">
            Passwords need to match
       </div>


    </div>
        
        <button class="btn btn-primary" type="submit">Change Password</button>

    <p>{{f.value| json}}</p>
</form>